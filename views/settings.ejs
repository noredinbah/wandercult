<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="icon" type="image/png" href="assets/images/logo.png">
    <link rel="stylesheet" href="settings.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
</head>
<body>
    <div class="wrapper">
        <header>
          <img src="assets/images/logo.png" alt="logo" class="logo" />
          <img src="assets/images/logoText.png" alt="logoText" class="logotext" />
          <img
            src="assets/images/search.png"
            id="myButton"
            alt="search"
            class="icon icon-searcher"
            onclick="performSear()"
          />
          <input
            type="text"
            id="searchInput"
            placeholder="Search places"
            class="search"
          />
          <% if (profileImagePath) { %>
            <img src="<%= profileImagePath %>" id="profile-button" alt="avatar" class="avatar" onclick="window.location.href='/profile';" >
            <% } else { %>
              <img src="assets/images/firefly.jpg" id="profile-button" alt="avatar" class="avatar" onclick="window.location.href='/profile';" />
              <% }%>
        </header>
        <container>
          <div class="left">
            <ul>
              <span >
                <img
                  src="assets/images/home.png"
                  alt="home"
                  class="icon home-icon"
                />
                <li><a href="/home">Home</a></li>
              </span>
              <span>
                <img
                  src="assets/images/old-phone_11552945.png"
                  alt="advice"
                  class="icon discover-icon"
                />
                <li><a href="/help">Numbers & advise</a></li>
              </span>
              <span>
                <img
                  src="assets/images/error-sign_76789.png"
                  alt="friends"
                  class="icon friends-icon"
                />
                <li><a href="/report">Report</a></li>
              </span>
              <span>
                <img
                  src="assets/images/saved.png"
                  alt="saved"
                  class="icon saved-icon"
                />
                <li><a href="/saved">Saved</a></li>
              </span>
            </ul>
            <div class="line1"></div>
            <ul class="ul2">
              <span class="second">
                <img
                  src="assets/images/settings.png"
                  alt="settings"
                  class="icon settings-icon"
                />
                <li><a onclick="window.location.href='/profile';">settings</a></li>
              </span>
              <span class="log">
                <img
                  src="assets/images/logout.png"
                  alt="logout"
                  class="icon logout-icon"
                />
                <li><a>Logout</a></li>
              </span>
            </ul>
            <div class="info">
              <a href="usage_condition.html" target="_blank"
                >Terms and services</a
              >
              <a href="securityTerms.html" target="_blank"> Privacy Policy</a>
            </div>
          </div>
          <div class="right">
            <div class="bloc">
              <div class="type">Mode</div>
              <button id="darkModeToggle"></button>
          </div>
            <div class="cardprof">
                <% if (profileImagePath) { %>
                  <img src="<%= profileImagePath %>" alt="Photo de profil" width="150" class="imgprofile">
                  <% } else { %>
                    <img src="assets/images/firefly.jpg" alt="Photo de profil" width="150" class="imgprofile" />
                    <% }%>
              <div class="information">
                <div class="name">
                  <p><strong>Name :</strong></p>
                  <p><%= user.username %></p>
                </div>
                <div class="email">
                  <p><strong>Email :</strong></p>
                  <p id="email"><%= user.email %></p>
                </div>

                <form action="/update-profile" method="POST" class="profile-form" id="profile-form">
                  <div class="form-group">
                    <label for="username"><strong>New Name :</strong></label>
                    <input type="text" name="username" id="usernamee" required>
                  </div>
                  <div class="form-group">
                    <label for="email"><strong>New Email :</strong></label>
                    <input type="email" name="email" id="emaill" required>
                  </div>
                  <div class="form-group">
                    <label for="password"><strong>New password :</strong></label>
                    <input type="password" name="password" id="passwordd" required>
                  </div>
                  <button type="submit">Update</button>
                </form>
                
                <form action="/upload-profile-pic" method="POST" class="formch" enctype="multipart/form-data">
                  <label for="profilePic">Change profile image :</label>
                  <input type="file" name="profilePic" id="profilePic" accept="image/*" required>
                  <button type="submit">Uploader</button>
                </form>
              </div>
            </div>
            <!-- Dark Mode Toggle Section -->
          </div>
        </container>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // Check if dark mode is already enabled
            if (localStorage.getItem('darkMode') === 'enabled') {
                body.classList.add('dark-mode');
            }

            darkModeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                if (body.classList.contains('dark-mode')) {
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    localStorage.setItem('darkMode', 'disabled');
                }
            });
        });
      </script>
      <script src="profile.js"></script>
    
</body>
</html>
